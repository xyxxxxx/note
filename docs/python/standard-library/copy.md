# copy——浅层和深层复制操作

Python 的赋值语句不复制对象，而是创建目标和对象的绑定关系。对于自身可变，或包含可变项的集合，有时要生成副本用于改变操作，而不必改变原始对象。此模块提供了通用的浅层复制和深层复制操作。

* `copy()`：返回对象的浅层复制。
* `deepcopy()`：返回对象的深层复制。

浅层与深层复制的区别仅与复合对象（即包含列表、字典或类的实例等其他对象的对象）相关：

* **浅层复制**构造一个新的复合对象，然后（在尽可能的范围内）将原始对象中找到的对象的**引用**插入其中。
* **深层复制**构造一个新的复合对象，然后递归地将在原始对象里找到的对象的**副本**插入其中。

```python
>>> import copy
>>> a1 = [1, 2, 3, [4, 5]]    # 复合对象
>>> a2 = copy.copy(a1)        # 浅层复制
>>> a3 = copy.deepcopy(a1)    # 深层复制
>>> hex(id(a1))
'0x107247100'
>>> hex(id(a2))               # 新的复合对象
'0x107298600'
>>> hex(id(a3))               # 新的复合对象
'0x10720bec0'
>>> hex(id(a1[3]))
'0x107299ec0'
>>> hex(id(a2[3]))            # 插入原始对象中的对象的引用
'0x107299ec0'
>>> hex(id(a3[3]))            # 插入原始对象中的对象的副本
'0x1072983c0'
```

深度复制操作通常存在两个问题，而浅层复制操作并不存在这些问题：

* 递归对象（直接或间接包含对自身引用的复合对象）可能会导致递归循环。
* 由于深层复制会复制所有内容，因此可能会过多复制（例如本应该在副本之间共享的数据）。

`deepcopy()` 函数用以下方式避免了这些问题：

* 保留在当前复制过程中已复制的对象的"备忘录"（`memo`）字典
* 允许用户定义的类重载复制操作或复制的组件集合。

制作字典的浅层复制可以使用 `dict.copy()` 方法，而制作列表的浅层复制可以通过赋值整个列表的切片完成，例如，`copied_list = original_list[:]`。
