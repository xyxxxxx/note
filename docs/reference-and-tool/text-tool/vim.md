# Vim

Vim 是一个文本编辑器，内建在所有类 Unix 系统中。

## 基本操作

!!! abstract "参考"
    * VIM Tutor（在命令行中执行 `vimtutor` 命令进入）

### 普通模式

Vim 启动后即进入普通模式（Normal mode）。此模式下使用按键会被 Vim 识别为命令，而非输入字符。

下面是一些常用的命令：

* 移动：
    * `h/j/k/l`：向左/下/上/右移动
    * `e`：移动到当前单词的结束位置（即当前单词的末字符）
    * `w`：移动到下一单词的开始位置（即下一单词的首字符）
    * `0`：移动到行首
    * `$`：移动到行末
    * `gg`：移动到首行（的行首）
    * `G`：移动到末行（的行首）
    * ++ctrl+g++：查看文件路径、当前行、总行数、当前进度和当前列
    * `# G`：移动到指定行（的行首），其中 `#` 表示行号
* 选择：
    * `v`：进入/退出视觉模式
* 修改：
    * `a`：在当前位置之后输入
    * `A`：在当前行的行末输入
    * `i`：在当前位置之前输入
    * `I`：在当前行的行首输入
    * `o`：下方另起一行输入
    * `O`：上方另起一行输入
    * `x`：删除当前位置的字符
    * `r`：替换当前位置的字符
    * `R`：进入替换模式
    * `dd`：删除（剪切）当前行
    * `de`：删除（剪切）直到当前单词的结束位置（包含当前单词的末字符）
    * `d2e`：删除（剪切）直到下一单词的结束位置（包含下一单词的末字符）（以此类推）
    * `dw`：删除（剪切）直到下一单词的开始位置（不包含下一单词的首字符）
    * `d$`：删除（剪切）直到行末
    * `yy`：复制当前行
    * `ye`：复制直到当前单词的结束位置（包含当前单词的末字符）
    * `yw`：复制直到下一单词的开始位置（不包含下一单词的首字符）
    * `p`：将上一次复制（或剪切）的（一个或多个）字符粘贴到当前位置之后，或将上一次复制（或剪切）的行粘贴到当前行之后
    * `cc`：修改当前行
    * `ce`：修改直到当前单词的结束位置（包含当前单词的末字符）
    * `cw`：修改直到下一单词的开始位置（不包含下一单词的首字符）
    * `C`：修改直到行末
    * `u`：撤销最后一个命令
    * ++ctrl+r++：重做最后一个撤销
    * `U`：撤销/重做对于最后修改的行所做的修改
* 查找：
    * `/`：向后查找
    * `n`：查找下一处
    * `?`：向前查找
    * `N`：查找上一处
    * `%`：移动到与当前位置的括号（`(,),[,],{,}`）相匹配的括号的位置

更多命令请参阅下图：

![](https://www.runoob.com/wp-content/uploads/2015/10/vi-vim-cheat-sheet-sch.gif)

按下 `:` 以在底部行输入更加复杂的命令（也可以输入上面的简单命令）。

下面是一些常用的命令：

* 修改：
    * `earlier {N}`：回到 N 次修改之前的状态
    * `earlier {N}s/m/h/d`：回到 N 秒/分/时/日之前的状态
    * `later {N}`：回到 N 次修改之后的状态
    * `later {N}s/m/h/d`：回到 N 秒/分/时/日之后的状态
* 查找：
    * `set ic`：忽略大小写
    * `set noic`：取消忽略大小写
    * `set hls`：高亮所有匹配项
    * `set nohls`：取消高亮所有匹配项
* 替换：
    * `s/old/new`：对当前行进行一次替换
    * `s/old/new/g`：对当前行进行全部替换
    * `#,#s/old/new/g`：对指定范围的行进行全部替换，其中 `#` 表示行号
    * `%s/old/new/g`：进行全部替换
    * `%s/old/new/gc`：进行全部替换，每次替换前询问
* 读写文件：
    * `q!`：丢弃所有修改并退出
    * `wq`：保存所有修改并退出
    * `w {name}`：写入文件
    * `r {name}`：读取文件
* 其他：
    * `!`：执行外部 shell 命令

### 插入模式

在普通模式下按下 `a/A/i/I/o/O` 即进入插入模式（Insert mode）。

在插入模式下，可以使用以下按键：

* **字符按键以及 Shift 组合**：输入字符
* ++enter++：回车键，换行
* ++back++：退格键，删除光标前一个字符
* ++del++：删除键，删除光标后一个字符
* **方向键**：移动
* ++home++/++end++：移动到行首/行尾
* ++pg-up++/++pg-dn++：上/下翻页
* ++ins++：切换光标为输入/替换模式，光标将变成竖线/下划线
* ++esc++：回到普通模式

### 替换模式

在普通模式下按下 `R` 即进入替换模式（Replace mode）。

替换模式与插入模式的不同之处在于，每键入一个字符都会删除一个已有的字符。

### 视觉模式

在普通模式下按下 `v` 即进入视觉模式（Visual mode）。

在视觉模式下，移动光标会选中（高亮）文本，此时按下 `d/x` 以删除这些文本；`y` 以复制这些文本。
