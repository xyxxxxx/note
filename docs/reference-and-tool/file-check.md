# 文件检查

## 算法

### md5

参见 [MD5](https://zh.wikipedia.org/wiki/MD5)

### SHA

参见 [SHA家族](https://zh.wikipedia.org/wiki/SHA%E5%AE%B6%E6%97%8F)

## 破解

### 蛮力攻击

蛮力攻击（英语：Brute-force attack），又称为穷举攻击（英语：Exhaustive attack）或暴力破解，是一种密码分析的方法，即将密码进行逐个推算直到找出真正的密码为止。例如：一个已知是四位数并且全部由阿拉伯数字组成的密码，其可能共有10000种组合，因此最多尝试9999次就能找到正确的密码。理论上除了具有完善保密性的密码以外，利用这种方法可以破解任何一种密码，问题只在于如何缩短试误时间。

### 碰撞攻击

> 参考：
>
> [哈希碰撞与生日攻击](https://www.ruanyifeng.com/blog/2018/09/hash-collision-and-birthday-attack.html)
>
> 哈希表

#### 碰撞

哈希算法将不同的输入映射成独特的、固定长度的值（又称哈希值），但如果不同的输入得到了同一个哈希值，就称发生了哈希碰撞(collision)。

![](https://www.wangbase.com/blogimg/asset/201809/bg2018090510.png)

举例来说，很多网络服务会使用哈希函数，产生一个 token，以标识用户的身份和权限。

```bash
AFGG2piXh0ht6dmXUxqv4nA1PU120r0yMAQhuc13i8
```

上面这个字符串就是一个哈希值。如果两个不同的用户得到了同样的 token，就发生了哈希碰撞。服务器将把这两个用户视为同一用户，这意味着，用户 B 可以读取和更改用户 A 的信息，这无疑带来了很大的安全隐患。黑客攻击的一种方法，就是设法制造哈希碰撞，然后入侵系统，窃取信息。

防止哈希碰撞的最有效方法，就是扩大哈希值的取值空间。16个二进制位的哈希值，产生碰撞的可能性是 65536 分之一；也就是说，如果有65537个用户，就一定会产生碰撞。若将哈希值的长度扩大到32个二进制位，碰撞的可能性就会下降到 4,294,967,296 分之一。但更长的哈希值也就意味着更大的存储空间、更多的计算，将影响性能和成本。开发者必须做出抉择，在安全与成本之间找到平衡。

#### 生日攻击

哈希碰撞问题在数学上早有原型，称为生日问题：一个班级有 $n$ 个学生，其中有人生日相同的概率为

$$
p(n)=1-\frac{365}{365}\frac{364}{365}\cdots \frac{365-n+1}{365}\approx 1-1\cdot e^{-\frac{1}{365}}\cdot e^{-\frac{2}{365}}\cdots e^{-\frac{n-1}{365}}\\
=1-e^{-\frac{n(n-1)}{730}}\approx 1-e^{-\frac{n^2}{730}}
$$

由此得到哈希碰撞概率的近似公式

$$
p(n,d)\approx 1-e^{-\frac{n^2}{2d}}
$$

其中 $d$ 为哈希的取值空间规模。令 $p(n,d)=0.5$，则有

$$
n\approx \sqrt{2\ln 2 d}
$$

可以看到，计算 $n$ 个值就有0.5的概率发生碰撞，而 $n$ 正比于 $\sqrt{d}$。

这种利用哈希的取值空间不够大而制造碰撞的攻击方法，称为生日攻击(birthday attack)。

### 彩虹表

